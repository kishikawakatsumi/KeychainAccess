language: objective-c
osx_image: beta-xcode6.3
cache:
  directories:
    - Lib/vendor/bundle
install:
  - sudo easy_install cpp-coveralls
  - (cd SwiftCov && sudo make install)
  - (cd Lib && bundle install --path=vendor/bundle --binstubs=vendor/bin)
script:
  - sudo chgrp wheel /Library/Developer/CoreSimulator/Profiles/Runtimes/iOS\ 7.1.simruntime/Contents/Resources/RuntimeRoot/usr/lib/dyld_sim
  - sudo chgrp wheel /Library/Developer/CoreSimulator/Profiles/Runtimes/iOS\ 8.1.simruntime/Contents/Resources/RuntimeRoot/usr/lib/dyld_sim
  - sudo chgrp wheel /Library/Developer/CoreSimulator/Profiles/Runtimes/iOS\ 8.2.simruntime/Contents/Resources/RuntimeRoot/usr/lib/dyld_sim
  - xcrun simctl list
  - (cd SwiftCov && sudo script/cibuild)
branches:
  only:
    - master
env:
  global:
    - LANG=en_US.UTF-8
    - LC_ALL=en_US.UTF-8
