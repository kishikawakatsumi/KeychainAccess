machine:
  xcode:
    version: "6.3.1"

dependencies:
  pre:
    - sudo easy_install cpp-coveralls
  override:
    - (cd Lib && bundle install --path=vendor/bundle --binstubs=vendor/bin)
  cache_directories:
    - 'Lib/vendor/bundle'

test:
  override:
    - (cd Lib && bundle exec rake test:ios test:osx coverage)
    - echo $TRAVIS_JOB_ID
    - echo $CIRCLE_BUILD_NUM
    - (cd Lib && TRAVIS_JOB_ID=$CIRCLE_BUILD_NUM coveralls --extension '.swift' --no-gcov --verbose)
